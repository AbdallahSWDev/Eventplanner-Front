import{a as D}from"./chunk-YYALV6FD.js";import{a as k,b as I,c as E,d as V,e as N,f as T,j as F,k as W}from"./chunk-6A5YDZKR.js";import{D as b,H as p,I as n,J as r,L as M,M as w,N as v,O as S,Q as a,R as P,S as x,U as u,V as f,W as h,fa as y,ha as O,n as m,o as g,pa as L,u as i,y as d,z as C}from"./chunk-SPS5S2K3.js";function R(s,l){if(s&1&&(n(0,"p",9),a(1),r()),s&2){let e=v();i(),P(e.serverError)}}var A=class s{constructor(l,e){this.authService=l;this.router=e}email="";password="";serverError="";isSubmitting=!1;onLogin(){this.isSubmitting=!0,this.serverError="";let l={email:this.email,password:this.password};this.authService.login(l).subscribe({next:e=>{this.isSubmitting=!1;let t=e?.token??e?.accessToken??e?.jwt??null;console.log("Login response",e,"resolved token:",t),t?(localStorage.setItem("token",t),this.router.navigate(["/events"])):alert(e?.message||"Logged in, but token not provided by backend.")},error:e=>{this.isSubmitting=!1,this.serverError=e.error?.error||e.error?.message||"Login failed!"}})}static \u0275fac=function(e){return new(e||s)(d(D),d(L))};static \u0275cmp=C({type:s,selectors:[["app-login"]],decls:14,vars:5,consts:[["loginForm","ngForm"],[1,"auth-container"],["novalidate","",3,"ngSubmit"],["type","email","name","email","placeholder","Email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["type","submit",3,"disabled"],[1,"switch"],["routerLink","/signup"],[1,"error"]],template:function(e,t){if(e&1){let c=M();n(0,"div",1)(1,"h2"),a(2,"Login"),r(),n(3,"form",2,0),w("ngSubmit",function(){return m(c),g(t.onLogin())}),n(5,"input",3),h("ngModelChange",function(o){return m(c),f(t.email,o)||(t.email=o),g(o)}),r(),n(6,"input",4),h("ngModelChange",function(o){return m(c),f(t.password,o)||(t.password=o),g(o)}),r(),b(7,R,2,1,"p",5),n(8,"button",6),a(9),r()(),n(10,"div",7),a(11," Don\u2019t have an account? "),n(12,"a",8),a(13,"Sign up here"),r()()()}if(e&2){let c=S(4);i(5),u("ngModel",t.email),i(),u("ngModel",t.password),i(),p("ngIf",t.serverError),i(),p("disabled",c.invalid||t.isSubmitting),i(),x(" ",t.isSubmitting?"Logging in...":"Login"," ")}},dependencies:[O,y,W,T,k,I,E,F,N,V],styles:['.auth-container[_ngcontent-%COMP%]{width:380px;margin:80px auto;padding:2.5rem;background:linear-gradient(145deg,#fff,#f0f8ff);border-radius:16px;box-shadow:0 8px 25px #00000026;text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;transform:scale(0);animation:_ngcontent-%COMP%_fadeInScale .6s forwards}@keyframes _ngcontent-%COMP%_fadeInScale{to{transform:scale(1);opacity:1}}.auth-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:1.5rem;position:relative}.auth-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";width:50px;height:3px;background:#4a90e2;display:block;margin:.5rem auto 0;border-radius:2px;transform:scaleX(0);transition:transform .4s}.auth-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.auth-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.auth-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ccc;border-radius:12px;font-size:1rem;transition:all .3s ease}.auth-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#4a90e2;box-shadow:0 0 8px #4a90e266;outline:none;transform:translateY(-2px)}.auth-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem;background-color:#4a90e2;color:#fff;font-weight:700;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease;transform:translateY(0)}.auth-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#357abd;transform:translateY(-3px);box-shadow:0 4px 12px #357abd66}.switch[_ngcontent-%COMP%]{margin-top:1rem;color:#555;font-size:.95rem;opacity:0;animation:_ngcontent-%COMP%_fadeInText 1s .5s forwards}@keyframes _ngcontent-%COMP%_fadeInText{to{opacity:1}}.switch[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4a90e2;text-decoration:none;font-weight:600;transition:color .3s,transform .3s}.switch[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#357abd;transform:scale(1.05)}']})};export{A as LoginComponent};
