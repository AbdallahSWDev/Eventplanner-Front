import{a as I,b as C,e as k,k as y}from"./chunk-6A5YDZKR.js";import{a as D}from"./chunk-QQQP4KHS.js";import{D as u,H as p,I as e,J as t,M as a,Q as o,T as g,U as f,V as _,W as E,ea as S,ha as h,na as b,u as d,y as c,z as v}from"./chunk-SPS5S2K3.js";function U(s,n){if(s&1&&(e(0,"div",14)(1,"p"),o(2),t()()),s&2){let i=n.$implicit;d(2),g("User ",i.user_id," - ",i.role," - ",i.status)}}var M=class s{constructor(n,i){this.route=n;this.eventService=i}eventId;event=null;attendees=[];inviteUserId="";ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&(this.eventId=+n,this.loadEvent())}loadEvent(){this.eventService.getAttendees(this.eventId).subscribe(n=>{this.attendees=n||[]},()=>this.attendees=[])}invite(){this.inviteUserId&&this.eventService.inviteUser(this.eventId,{user_id:+this.inviteUserId}).subscribe(()=>{this.loadEvent(),this.inviteUserId=""},n=>{console.error("invite failed",n)})}setStatus(n){this.eventService.setAttendance(this.eventId,{status:n}).subscribe(()=>{let i=this.attendees.find(r=>r.user_id===+localStorage.getItem("userId"));i&&(i.status=n),alert(`Your status has been set to "${n}"`)},i=>{console.error("Failed to update status",i),alert("Failed to update status")})}logout(){localStorage.removeItem("token"),window.location.href="/login"}static \u0275fac=function(i){return new(i||s)(c(b),c(D))};static \u0275cmp=v({type:s,selectors:[["app-event-details"]],decls:32,vars:2,consts:[[1,"navbar"],[1,"navbar-left"],[1,"logo"],[1,"navbar-right"],["routerLink","/events"],["routerLink","/create-event"],["routerLink","/search"],[1,"logout",3,"click"],[1,"container"],[1,"attendees-grid"],["class","attendee-card",4,"ngFor","ngForOf"],["placeholder","User ID",3,"ngModelChange","ngModel"],[3,"click"],[1,"attendance-buttons"],[1,"attendee-card"]],template:function(i,r){i&1&&(e(0,"nav",0)(1,"div",1)(2,"span",2),o(3,"EventPlanner"),t()(),e(4,"div",3)(5,"a",4),o(6,"Home"),t(),e(7,"a",5),o(8,"Create Event"),t(),e(9,"a",6),o(10,"Search"),t(),e(11,"a",7),a("click",function(){return r.logout()}),o(12,"Logout"),t()()(),e(13,"div",8)(14,"h2"),o(15,"Event Attendees"),t(),e(16,"div",9),u(17,U,3,3,"div",10),t(),e(18,"h3"),o(19,"Invite User"),t(),e(20,"input",11),E("ngModelChange",function(m){return _(r.inviteUserId,m)||(r.inviteUserId=m),m}),t(),e(21,"button",12),a("click",function(){return r.invite()}),o(22,"Invite"),t(),e(23,"h3"),o(24,"Your Attendance"),t(),e(25,"div",13)(26,"button",12),a("click",function(){return r.setStatus("Going")}),o(27,"Going"),t(),e(28,"button",12),a("click",function(){return r.setStatus("Maybe")}),o(29,"Maybe"),t(),e(30,"button",12),a("click",function(){return r.setStatus("Not Going")}),o(31,"Not Going"),t()()()),i&2&&(d(17),p("ngForOf",r.attendees),d(3),f("ngModel",r.inviteUserId))},dependencies:[h,S,y,I,C,k],encapsulation:2})};export{M as EventDetailsComponent};
